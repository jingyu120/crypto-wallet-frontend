(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{234:function(e,t,n){},409:function(e,t,n){},411:function(e,t,n){},412:function(e,t,n){},413:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){},434:function(e,t,n){},435:function(e,t,n){},436:function(e,t,n){},437:function(e,t,n){},438:function(e,t,n){},441:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(104),o=n.n(r),s=(n(234),n(48)),i=n(11),l=n(8),j=n(228),u=n(4),b=n(0),d=n.n(b),h=n(18),O=n(227),p=n(64),m=Object(p.c)({name:"messages",initialState:[],reducers:{appendMessage:function(e,t){var n={id:new Date(Date.now()).toString(),room:t.payload.room,author:t.payload.author,message:t.payload.message,time:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()};e.push(n)}}}),x=m.actions.appendMessage,f=m.reducer,v=(n(409),n(2));var g=function(e){var t=e.socket,n=e.username,a=e.room,r=Object(c.useState)(""),o=Object(l.a)(r,2),s=o[0],i=o[1],j=Object(h.c)((function(e){return e.message})),b=Object(h.b)(),p=function(){var e=Object(u.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===s){e.next=6;break}return c={room:a,author:n,message:s},e.next=4,t.emit("send_message",c);case 4:b(x(c)),i("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){t.on("receive_message",(function(e){b(x(e))}))}),[t,b]),Object(v.jsxs)("div",{className:"chat-window",children:[Object(v.jsx)("div",{className:"chat-header",children:Object(v.jsx)("p",{children:"Live Chat"})}),Object(v.jsx)("div",{className:"chat-body",children:Object(v.jsx)(O.a,{className:"message-container",children:j.map((function(e){return Object(v.jsx)("div",{className:"message",id:n===e.author?"you":"other",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"message-content",children:Object(v.jsx)("p",{children:e.message})}),Object(v.jsxs)("div",{className:"message-meta",children:[Object(v.jsxs)("p",{id:"time",children:[" ",e.time," "]}),Object(v.jsxs)("p",{id:"author",children:[" ",e.author," "]})]})]})},e.id)}))})}),Object(v.jsxs)("div",{className:"chat-footer",children:[Object(v.jsx)("input",{type:"text",value:s,placeholder:"Hey...",onChange:function(e){i(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&p()}}),Object(v.jsx)("button",{onClick:p,children:"\u25ba"})]})]})};n(411);function y(e){var t=e.setUsername,n=e.room,c=e.setRoom,a=e.joinRoom;return Object(v.jsxs)("div",{className:"joinChatContainer",children:[Object(v.jsx)("h3",{children:"Join A Chat"}),Object(v.jsx)("input",{type:"text",placeholder:"Enter your name",onChange:function(e){t(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&a()}}),Object(v.jsxs)("select",{value:n,onChange:function(e){c(e.target.value)},children:[Object(v.jsx)("option",{value:"general",children:"General"}),Object(v.jsx)("option",{value:"room1",children:"Room 1"}),Object(v.jsx)("option",{value:"room2",children:"Room 2"}),Object(v.jsx)("option",{value:"room3",children:"Room 3"}),Object(v.jsx)("option",{value:"room4",children:"Room 4"}),Object(v.jsx)("option",{value:"room5",children:"Room 5"}),Object(v.jsx)("option",{value:"room6",children:"Room 6"})]}),Object(v.jsx)("button",{onClick:a,children:"Join a Room"})]})}n(412);var C=j.a.connect("https://mern-crypto-wallet.herokuapp.com/");function S(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(l.a)(r,2),s=o[0],i=o[1],j=Object(c.useState)("general"),u=Object(l.a)(j,2),b=u[0],d=u[1];return Object(v.jsx)("div",{className:"chat-container",children:n?Object(v.jsx)(g,{socket:C,username:s,room:b}):Object(v.jsx)(y,{room:b,setUsername:i,setRoom:d,joinRoom:function(){""!==s&&""!==b&&(C.emit("join_room",b),a(!0))}})})}n(413);var N=n(33),w=n(20),k=n.n(w),B=n(223),P=n(54),U=Object(B.a)({apiKey:"AIzaSyD1XDf8roZwl9Ul38GblBWogyvSdTqsRqM",authDomain:"react-chat-f71bf.firebaseapp.com",projectId:"react-chat-f71bf",storageBucket:"react-chat-f71bf.appspot.com",messagingSenderId:"455884864258",appId:"1:455884864258:web:aaa1c98b1d7a3fb2b2201b",measurementId:"G-J610CGFW0G"}),E=Object(P.c)(U),A=new P.a,R=a.a.createContext(),D=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(l.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)(!0),i=Object(l.a)(s,2),j=i[0],u=i[1];return Object(c.useEffect)((function(){E.onAuthStateChanged((function(e){o(e),u(!1)}))}),[]),j?Object(v.jsx)(v.Fragment,{children:"Loading..."}):Object(v.jsx)(R.Provider,{value:{currentUser:r},children:t})},L=(n(432),n(3)),F=Object(p.b)("crypto/getCryptoList",function(){var e=Object(u.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get("https://api.coinlore.net/api/tickers/").then((function(e){return e.data.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(p.c)({name:"messages",initialState:{balance:0,cryptoList:[]},reducers:{setBalance:function(e,t){e.balance=t.payload},setCryptoList:function(e,t){e.cryptoList=t.payload}},extraReducers:Object(L.a)({},F.fulfilled,(function(e,t){e.cryptoList=t.payload}))}),M=_.actions,T=M.setBalance,G=(M.setCryptoList,_.reducer);var W=function(e){var t=e.coinProp,n=e.coinAmount,a=Object(h.c)((function(e){return e.crypto})),r=a.balance,o=a.cryptoList,s=Object(h.b)(),i=Object(c.useContext)(R).currentUser,j=Object(c.useState)(!1),u=Object(l.a)(j,2),b=u[0],d=u[1],O=o.filter((function(e){return e.symbol===t.coinSelected}))[0].id,p=null;return b?Object(v.jsx)(v.Fragment,{children:"Processing"}):Object(v.jsx)("button",{className:"buy-button",onClick:function(){try{d(!0),k.a.get("https://api.coinlore.net/api/ticker/?id=".concat(O)).then((function(e){p=e.data[0].price_usd})).then((function(){var e={name:t.coinSelected,amount:Number(n),cost:Number(n*p)};r>=e.cost?k.a.post("https://mern-crypto-wallet.herokuapp.com/api/user/".concat(i.email,"/addCoin"),e).then((function(e){s(T(e.data))})):alert("not enough balance"),d(!1)}))}catch(e){console.log(e.message)}},children:"Buy"})};function q(e){var t=e.coinCost,n=e.coinName,a=Object(c.useState)(0),r=Object(l.a)(a,2),o=r[0],s=r[1],i=Object(c.useState)(0),j=Object(l.a)(i,2),u=j[0],b=j[1],d=Object(c.useState)({coinSelected:n,modalOpen:!1,transaction:"Buy",coinTotal:null}),h=Object(l.a)(d,2),O=h[0],p=h[1];return Object(c.useEffect)((function(){s(u*t),p((function(e){return Object(N.a)(Object(N.a)({},e),{},{coinTotal:u})}))}),[t,u]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("td",{children:Object(v.jsxs)("div",{className:"amount-container",children:[Object(v.jsx)("input",{placeholder:"amount",onChange:function(e){b(e.target.value)}}),Object(v.jsx)(W,{coinProp:O,coinAmount:u})]})}),Object(v.jsxs)("td",{children:["$",o]})]})}function I(){var e=Object(c.useContext)(R).currentUser,t=Object(h.c)((function(e){return e.crypto})).cryptoList,n=Object(h.b)();return Object(c.useEffect)((function(){n(F())}),[n]),Object(v.jsx)("div",{className:"crypto-table",children:Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Symbol"}),Object(v.jsx)("th",{children:"Name"}),Object(v.jsx)("th",{children:"Price USD"}),Object(v.jsx)("th",{children:"% Change"}),e&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("th",{children:"Buy"}),Object(v.jsx)("th",{children:"Cost"})]})]})}),Object(v.jsx)("tbody",{children:t.length>0&&t.map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.symbol}),Object(v.jsx)("td",{children:t.name}),Object(v.jsxs)("td",{children:["$",t.price_usd]}),Object(v.jsx)("td",{children:t.percent_change_24h}),e&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(q,{coinCost:t.price_usd,coinName:t.symbol})})]},t.id)}))})]})})}n(433);function J(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(v.jsxs)("div",{children:[Object(v.jsx)(I,{}),Object(v.jsxs)("button",{className:"chat-toggle",onClick:function(){return a(!n)},children:[n?"Close":"Show"," Chat"]}),n&&Object(v.jsx)(S,{})]})}var $=function(e){var t=e.coinProp,n=e.coinAmount,a=Object(c.useContext)(R).currentUser,r=Object(h.c)((function(e){return e.crypto})).cryptoList,o=Object(h.b)(),s=Object(c.useState)(!1),i=Object(l.a)(s,2),j=i[0],u=i[1],b=r.filter((function(e){return e.symbol===t.coinSelected}))[0].id,d=null;return j?Object(v.jsx)(v.Fragment,{children:"Processing"}):Object(v.jsx)("button",{onClick:function(){if(n>t.coinTotal)alert("Not enough coins in wallet.");else try{u(!0),k.a.get("https://api.coinlore.net/api/ticker/?id=".concat(b)).then((function(e){d=e.data[0].price_usd})).then((function(){var e={name:t.coinSelected,amount:Number(n),cost:Number(n*d)};k.a.post("https://mern-crypto-wallet.herokuapp.com/api/user/".concat(a.email,"/sellCoin"),e).then((function(e){return o(T(e.data))})),u(!1)}))}catch(e){console.log(e.message)}},children:"Sell"})};n(434);var H=function(e){var t=e.setOpenModal,n=e.coinProp,a=Object(c.useState)(0),r=Object(l.a)(a,2),o=r[0],s=r[1];return Object(v.jsx)("div",{className:"modalBackground",children:Object(v.jsxs)("div",{className:"modalContainer",children:[Object(v.jsx)("div",{className:"titleCloseBtn",children:Object(v.jsx)("button",{onClick:function(){t((function(e){return Object(N.a)(Object(N.a)({},e),{},{modalOpen:!1})}))},children:"X"})}),Object(v.jsxs)("div",{className:"title",children:[Object(v.jsx)("h1",{children:n.transaction+" "+n.coinSelected}),Object(v.jsxs)("h2",{children:["Coin Amount: ",n.coinTotal]})]}),Object(v.jsx)("div",{className:"body",children:Object(v.jsx)("input",{className:"transaction-input",placeholder:"Amount",onChange:function(e){s(e.target.value)}})}),Object(v.jsxs)("div",{className:"footer",children:[Object(v.jsx)("button",{onClick:function(){t(!1)},id:"cancelBtn",children:"Cancel"}),"Buy"===n.transaction?Object(v.jsx)(W,{coinProp:n,coinAmount:o}):null,"Sell"===n.transaction?Object(v.jsx)($,{coinProp:n,coinAmount:o}):null]})]})})};n(435);var K=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({coinSelected:null,modalOpen:!1,transaction:null,coinTotal:null}),o=Object(l.a)(r,2),s=o[0],i=o[1],j=Object(c.useContext)(R).currentUser;return Object(c.useEffect)((function(){k.a.get("https://mern-crypto-wallet.herokuapp.com/api/user/getCoins",{params:{email:j.email}}).then((function(e){a(e.data)}))}),[s.modalOpen]),Object(v.jsx)("div",{className:"portfolio-table",children:Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:"Symbol"}),Object(v.jsx)("td",{children:"Amount"}),Object(v.jsx)("td",{children:"Cost"}),Object(v.jsx)("td",{children:"Buy/Sell"})]})}),Object(v.jsx)("tbody",{children:n&&n.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.amount}),Object(v.jsx)("td",{children:e.cost.toFixed(2)}),Object(v.jsxs)("td",{children:[s.modalOpen&&Object(v.jsx)(H,{setOpenModal:i,coinProp:s}),Object(v.jsx)("button",{className:"openModalBtn buy",onClick:function(){return i((function(t){return Object(N.a)(Object(N.a)({},t),{},{modalOpen:!0,coinSelected:e.name,transaction:"Buy",coinTotal:e.amount})}))},children:"Buy"}),Object(v.jsx)("button",{className:"openModalBtn sell",onClick:function(){return i((function(t){return Object(N.a)(Object(N.a)({},t),{},{modalOpen:!0,coinSelected:e.name,transaction:"Sell",coinTotal:e.amount})}))},children:"Sell"})]})]},e._id)}))})]})})};function z(e){var t=e.currentUser,n=Object(i.f)();return Object(c.useEffect)((function(){t||n("/login")}),[t]),Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:" Portfolio Networth: "}),Object(v.jsx)(K,{})]})}n(436);function X(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(l.a)(r,2),j=o[0],b=o[1],h=Object(i.f)(),O=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(P.d)(E,n,j);case 3:t=e.sent,console.log(t),h("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"loginPage",children:[Object(v.jsxs)("div",{className:"input-fields",children:[Object(v.jsx)("input",{placeholder:"email",onChange:function(e){return a(e.target.value)}}),Object(v.jsx)("input",{placeholder:"password",onChange:function(e){return b(e.target.value)}})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"sign-in",onClick:O,children:"Login"}),Object(v.jsx)("button",{className:"google-sign-in",onClick:function(){Object(P.e)(E,A).then((function(e){var t={name:e.user.displayName,email:e.user.email};k.a.post("https://mern-crypto-wallet.herokuapp.com/api/user/google_sign_in",t).then((function(e){200===e.status?h("/"):alert("Server error, please try again later")}))}))},children:"Sign in with Google"})]}),Object(v.jsx)("div",{children:Object(v.jsxs)("span",{className:"register",children:["Not registered? ",Object(v.jsx)(s.b,{to:"/registration",children:"Create an account"})]})})]})}n(437);function Z(){var e=Object(c.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),o=Object(l.a)(r,2),s=o[0],j=o[1],b=Object(c.useState)(),h=Object(l.a)(b,2),O=h[0],p=h[1],m=Object(c.useState)(),x=Object(l.a)(m,2),f=x[0],g=x[1],y=Object(c.useState)("Male"),C=Object(l.a)(y,2),S=C[0],N=C[1],w=Object(i.f)(),B=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(s,O),e.next=4,Object(P.b)(E,s,O);case 4:t={name:n,email:s,birthday:f,gender:S},k.a.post("https://mern-crypto-wallet.herokuapp.com/api/user/createUser",t).then((function(e){200===e.status?w("/"):alert("Server error when creating user.")})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"form",children:[Object(v.jsx)("h1",{children:"Registration"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"details",children:"Full Name"}),Object(v.jsx)("input",{type:"text",placeholder:"Enter name",onChange:function(e){a(e.target.value)},required:!0})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"details",children:"Email"}),Object(v.jsx)("input",{type:"email",placeholder:"Enter email",onChange:function(e){j(e.target.value)},required:!0})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"details",children:"Password"}),Object(v.jsx)("input",{type:"password",placeholder:"Enter password",onChange:function(e){p(e.target.value)},required:!0})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"details",children:"Birthday"}),Object(v.jsx)("input",{type:"date",placeholder:"Enter birthday",onChange:function(e){g(e.target.value)},required:!0})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"details",children:"Gender"}),Object(v.jsxs)("select",{value:S,onChange:function(e){N(e.target.value)},children:[Object(v.jsx)("option",{value:"Male",children:"Male"}),Object(v.jsx)("option",{value:"Female",children:"Female"})]})]}),Object(v.jsx)("div",{children:Object(v.jsx)("button",{className:"registration-submit",onClick:B,children:"Submit"})})]})}n(438);var Q=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("+"),o=Object(l.a)(r,2),s=o[0],i=o[1],j=Object(h.c)((function(e){return e.crypto})).balance,u=Object(h.b)(),b=Object(c.useContext)(R).currentUser,d=function(e){"+"===e?k.a.post("https://mern-crypto-wallet.herokuapp.com/api/user/".concat(b.email,"/depositCash/").concat(n)).then((function(e){200===e.status?(u(T(e.data)),alert("Deposit Successful")):alert("Deposit Unsuccessful")})):"-"===e?k.a.post("https://mern-crypto-wallet.herokuapp.com/api/user/".concat(b.email,"/withdrawCash/").concat(n)).then((function(e){200===e.status?(u(T(e.data)),alert("Withdraw Successful")):alert("Withdraw Unsuccessful")})):alert("invalid transaction method.")};return Object(v.jsxs)("div",{className:"balance_input",children:[Object(v.jsx)("label",{children:"Amount"}),Object(v.jsx)("input",{placeholder:"Amount in USD",type:"number",onChange:function(e){return a(e.target.value)}}),Object(v.jsxs)("select",{value:s,onChange:function(e){return i(e.target.value)},children:[Object(v.jsx)("option",{value:"+",children:"Deposit"}),Object(v.jsx)("option",{value:"-",children:"Withdraw"})]}),Object(v.jsx)("button",{onClick:function(){"+"===s?d("+"):"-"===s?Number(n)>j?alert("Not enough for a withdraw."):d("-"):alert("transaction is not + or -")},children:"Submit"})]})};var V=function(){var e=Object(c.useContext)(R).currentUser,t=Object(h.c)((function(e){return e.crypto})).balance,n=Object(h.b)();return Object(c.useEffect)((function(){e&&k.a.get("https://mern-crypto-wallet.herokuapp.com/api/user/".concat(e.email,"/balance")).then((function(e){return n(T(e.data))}))}),[e,n]),Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(s.a,{children:[Object(v.jsxs)("nav",{children:[Object(v.jsx)(v.Fragment,{}),Object(v.jsxs)("div",{className:"center-nv",children:[Object(v.jsx)(s.b,{to:"/",children:"Home"}),e&&Object(v.jsx)(s.b,{to:"/portfolio",children:"Portfolio"}),e?Object(v.jsxs)("button",{className:"logout-btn",onClick:function(){return E.signOut()},children:["Log Out ",e.email]}):Object(v.jsx)(s.b,{to:"/login",children:"Login"})]}),Object(v.jsx)("div",{className:"right-nav",children:e&&Object(v.jsxs)(s.b,{to:"/balance",children:["Current Balance: $",Number(t).toFixed(2)," "]})})]}),Object(v.jsxs)(i.c,{children:[Object(v.jsx)(i.a,{path:"/",element:Object(v.jsx)(J,{})}),Object(v.jsx)(i.a,{path:"/registration",element:Object(v.jsx)(Z,{})}),Object(v.jsx)(i.a,{path:"/portfolio",element:Object(v.jsx)(z,{currentUser:e})}),Object(v.jsx)(i.a,{path:"/login",element:Object(v.jsx)(X,{})}),Object(v.jsx)(i.a,{path:"/balance",element:Object(v.jsx)(Q,{})})]})]})})},Y=n(50),ee=n(224),te=n.n(ee),ne=n(225),ce=n.n(ne),ae={key:"root",version:1,storage:te.a,stateReconciler:ce.a},re=Object(Y.g)(ae,G),oe=Object(p.a)({reducer:{message:f,crypto:re},middleware:function(e){return e({serializableCheck:{ignoredActions:[Y.a,Y.f,Y.b,Y.c,Y.d,Y.e]}})}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=n(226),ie=Object(Y.h)(oe);o.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(h.a,{store:oe,children:Object(v.jsx)(se.a,{loading:null,persistor:ie,children:Object(v.jsx)(D,{children:Object(v.jsx)(V,{})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[441,1,2]]]);
//# sourceMappingURL=main.a55e4474.chunk.js.map